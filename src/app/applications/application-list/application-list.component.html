<div class="application-list">

    <h1 class="sr-only">BC Public Review and Comment Application</h1>

    <!-- APPLICATION LIST VIEW -->
    <div class="map-list-container">
        <div class="map-list-container__options">
            <mat-slide-toggle color="primary" [checked]="showOnlyOpenApps" (change)="showOnlyOpenApps = $event.checked">
                Only show applications with an open or future comment period
            </mat-slide-toggle>
        </div>

        <div class="list-group" *ngIf="applications">
            <div class="list-group-item" *ngIf="applications.length === 0">
                No applications found.
            </div>

            <ng-template ngFor let-item [ngForOf]="applications">
                <div *ngIf="showThisApp(item)" class="list-group-item" [class.active]="isCurrentApp(item)" (mouseover)="showCurrentApp(item)" (click)="setCurrentApp(item)">
                    <h2>{{item.proponent ? item.proponent.name : 'Unknown Proponent'}}</h2>
                    <span class="badge" [ngClass]="{'badge-primary' : commentPeriodService.getStatus(item.currentPeriod) == commentPeriodService.commentStatuses['NOT STARTED'],
                       'badge-secondary' : commentPeriodService.getStatus(item.currentPeriod) == commentPeriodService.commentStatuses['NOT OPEN'],
                       'badge-danger' : commentPeriodService.getStatus(item.currentPeriod) == commentPeriodService.commentStatuses['CLOSED'],
                       'badge-success' : commentPeriodService.getStatus(item.currentPeriod) == commentPeriodService.commentStatuses['OPEN']}">
                        {{commentPeriodService.getStatus(item.currentPeriod)}}
                    </span>
                    <ul class="nv-list">
                        <li>
                            <span class="nv-list__item--name">Status</span>
                            <span class="nv-list__item--value">{{applicationService.getStatus(item)}}</span>
                        </li>
                        <li class="nv-list_item" *ngIf="item.purpose && item.subpurpose">
                            <span class="nv-list__item--name">Purpose</span>
                            <span class="nv-list__item--value">
                                <span>{{item.purpose | titlecase}}</span>
                                <span>({{item.subpurpose | titlecase}})</span>
                            </span>
                        </li>
                        <li class="nv-list_item" *ngIf="item.type && item.subtype">
                            <span class="nv-list__item--name">Tenure Type</span>
                            <span class="nv-list__item--value">
                                {{item.type | titlecase}}
                                <span>({{item.subtype | titlecase}})</span>
                            </span>
                        </li>
                    </ul>
                    <div class="list-group-item__buttons">
                        <a [routerLink]="['/application', item._id]">Go to Application Details &rsaquo;</a>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>

    <!-- APPLICATION MAP VIEW -->
    <app-main-map class="map-container"></app-main-map>

</div>